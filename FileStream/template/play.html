<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FileStreamBot | {{file_name}}</title>

    <link rel="icon" href="https://i.ibb.co/Hh4kF2b/icon.png">
    <link rel="shortcut icon" href="https://i.ibb.co/Hh4kF2b/icon.png">

    <link rel="stylesheet" href="https://unpkg.com/sheryjs/dist/Shery.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/proavipatil/data@main/fs/src/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/proavipatil/data@main/fs/src/plyr.css">

    <script src="https://cdn.tailwindcss.com"></script>

    <!-- âœ… FORCE BUTTON VISIBILITY (FIXED FOREVER) -->
    <style>
        .downloadBtn,
        .downloadBtn button,
        .downloadBtn .magnet {
            display: inline-flex !important;
            visibility: visible !important;
            opacity: 1 !important;
            z-index: 9999 !important;
        }

        @media (max-width: 768px) {
            .downloadBtn {
                display: flex !important;
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }
        }
    </style>
</head>

<body>

<nav>
    <div class="nleft">
        <h3 class="magnet title">FILE STREAM</h3>
    </div>
    <div class="nryt">
        <a class="home-btn magnet" href="#main">HOME</a>
        <a class="about-btn magnet" href="#abtus">ABOUT</a>
    </div>
</nav>

<div class="outer">
<div class="inner">

<div class="main" id="main">
    <!-- âœ… WEB PLAYER -->
    <video id="player" class="player" src="{{file_url}}" playsinline controls width="100%"></video>

    <div class="file-name">
        <h4>File Name:</h4> {{file_name}} <br>
        <h4>File Size:</h4> {{file_size}}
    </div>

    <!-- âœ… BUTTONS -->
    <div class="downloadBtn">

        <button class="magnet" onclick="copyLink()">
            ðŸ”— Copy Link
        </button>

        <button class="magnet" onclick="playMX()">
            â–¶ MX Player
        </button>

        <button class="magnet" onclick="playVLC()">
            â–¶ VLC Player
        </button>

    </div>
</div>

</div>
</div>

<footer class="p-4 text-center text-sm text-gray-400">
    Â© 2025 <a href="https://t.me/trendi_Backup">Goflix</a>. All Rights Reserved
</footer>

<script src="https://cdn.plyr.io/3.6.9/plyr.js"></script>

<script>
    new Plyr('#player');

    const FILE_ID = "{{file_id}}";
    const BASE = window.location.origin;
    const STREAM = `${BASE}/dl/${FILE_ID}`;

    function copyLink() {
        navigator.clipboard.writeText(`${BASE}/watch/${FILE_ID}`);
        alert("Link copied");
    }

    // âœ… MX PLAYER (NO PLAY STORE)
    function playMX() {
        window.location.href = STREAM;
    }

    // âœ… VLC PLAYER (SAFE FALLBACK)
    function playVLC() {
        window.location.href = `vlc://${STREAM}`;
        setTimeout(() => {
            window.location.href = STREAM;
        }, 1200);
    }
</script>

</body>
</html>
